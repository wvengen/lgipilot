<!--
    Example configuration for an LGI pilot job resource daemon

    Copyright (C) 2011 W. van Engen, Stichting FOM, The Netherlands
    
    This is free software; you can redistribute it and/or modify it under the terms of
    the GNU General Public License as published by the Free Software Foundation.
    
    http://www.gnu.org/licenses/gpl.txt
-->
<LGI>
	<ca_certificate_file>certificates/ca.crt</ca_certificate_file>
	<resource>
		<resource_certificate_file>certificates/resource.crt</resource_certificate_file>
		<resource_key_file>certificates/resource.key</resource_key_file>
		<run_directory>runhere</run_directory>
		<owner_allow> </owner_allow>
		<owner_deny> </owner_deny>
		<job_limit> 1 </job_limit>

		<number_of_projects> 1 </number_of_projects>

		<project number='1'>
			<project_name>helloworld</project_name>
			<project_master_server>https://example.com/LGI</project_master_server>
		
			<owner_allow> </owner_allow>
			<owner_deny> </owner_deny>
			<job_limit> 1 </job_limit>

			<number_of_applications> 2 </number_of_applications>

			<application number='1'>
				<application_name> hello_pilot </application_name>

				<owner_allow> <any> 1 </any> </owner_allow>
				<owner_deny> </owner_deny>
				<job_limit> 1 </job_limit>
				<max_output_size> 4096 </max_output_size>

				<check_system_limits_script> scripts/check_system_limits_script </check_system_limits_script>
				<job_check_limits_script> scripts/job_check_limits_script </job_check_limits_script>
				<job_check_running_script> scripts/job_check_running_script </job_check_running_script>
				<job_check_finished_script> scripts/job_check_finished_script </job_check_finished_script>
				<job_prologue_script> scripts/job_prologue_script </job_prologue_script>
				<job_run_script> scripts/job_run_script </job_run_script>
				<job_epilogue_script> scripts/job_epilogue_script </job_epilogue_script>
				<job_abort_script> scripts/job_abort_script </job_abort_script>
			</application>

			<!-- this is a special application to terminate the pilotjob -->
			<!-- access is only allowed by members of the admin group    -->
			<application number='1'>
				<application_name> kill </application_name>

				<owner_allow> <admin> 1 </admin> </owner_allow>
				<owner_deny> </owner_deny>
				<job_limit> 1 </job_limit>
				<max_output_size> 4096 </max_output_size>

				<check_system_limits_script> /bin/true </check_system_limits_script>
				<job_check_limits_script> /bin/true </job_check_limits_script>
				<job_check_running_script> /bin/false </job_check_running_script>
				<job_check_finished_script> /bin/true </job_check_finished_script>
				<job_prologue_script> bin/job_kill_daemon_script </job_prologue_script>
				<job_run_script> /bin/true </job_run_script>
				<job_epilogue_script> /bin/true </job_epilogue_script>
				<job_abort_script> /bin/true </job_abort_script>
			</application>

		</project>

	</resource>
</LGI>
